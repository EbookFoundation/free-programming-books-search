(this.webpackJsonpfpb_search_page=this.webpackJsonpfpb_search_page||[]).push([[0],{60:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(45),o=n.n(r),i=(n(60),n(25)),s=n(2),u=(n(9),n(5)),l=n(18),h=n.n(l),d=n(35),b=n(3),f=n(0);var j=function(e){var t=e.data;return Object(f.jsx)("li",{className:"result",children:Object(f.jsxs)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:["(",t.lang.code,") ",t.title,t.author?" by ".concat(t.author):""]})})};var g=n(28),m=n.n(g),p=n(51),O={dark:"",light:"dark-content"},v=function(e){if(e===O.light)document.body.classList.add("dark-content");else document.body.classList.remove("dark-content")},k=Object(c.createContext)({theme:O.dark,changeTheme:function(){}});function S(e){var t=Object(c.useState)(e.theme),n=Object(u.a)(t,2),a=n[0],r=n[1];return v(a),Object(f.jsx)(k.Provider,{value:{theme:a,changeTheme:function(e){r(e)}},children:e.children})}var x=n(94);n.p,n.p,n(93),n(52);var E=null;function y(e){var t=[],n=[];return e.children[0].children.forEach((function(e){e.sections.forEach((function(c){n.includes(c.section)||n.push(c.section),c.entries.forEach((function(n){t.push({author:n.author,title:n.title,url:n.url,lang:e.language,section:c.section})})),c.subsections.forEach((function(n){n.entries.forEach((function(a){t.push({author:a.author,title:a.title,url:a.url,lang:e.language,section:c.section,subsection:n.section})}))}))}))})),{arr:t,sections:n}}var L=function(){var e=Object(c.useState)(void 0),t=Object(u.a)(e,2),n=(t[0],t[1]),r=Object(c.useState)([]),o=Object(u.a)(r,2),l=o[0],g=o[1],S=Object(c.useState)([]),L=Object(u.a)(S,2),T=(L[0],L[1]),w=Object(c.useState)(!0),F=Object(u.a)(w,2),M=F[0],C=F[1],A=Object(c.useState)({searchTerm:""}),_=Object(u.a)(A,2),B=_[0],I=(_[1],Object(c.useState)([])),P=Object(u.a)(I,2),J=P[0],$=P[1],D=Object(x.a)(["lightMode"]),N=Object(u.a)(D,3),q=N[0],z=(N[1],N[2],Object(c.useState)(!0)),G=Object(u.a)(z,2),H=(G[0],G[1],Object(c.useState)("")),K=Object(u.a)(H,2),Q=K[0],R=(K[1],null);return Object(c.useEffect)((function(){function e(){return(e=Object(i.a)(h.a.mark((function e(){var t,c,a,r,o,i,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!0),e.next=4,m.a.get("https://raw.githubusercontent.com/FreeEbookFoundationBot/free-programming-books-json/main/fpb.json");case 4:t=e.sent,n(t.data),c=y(t.data),a=c.arr,r=c.sections,g(a),T(r),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(0),n(E),o=y(E),i=o.arr,s=o.sections,T(s),g(i);case 17:C(!1);case 18:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}v(q.lightMode?O.lightMode:O.darkMode),function(){e.apply(this,arguments)}()}),[]),Object(c.useEffect)((function(){if(l){for(var e=new p.a(l,{useExtendedSearch:!0,findAllMatches:!0,shouldSort:!0,includeScore:!0,threshold:.2,keys:["author","title","lang.code","section"]}),t=[],n=[],c=0,a=Object.entries(B);c<a.length;c++){var r=Object(u.a)(a[c],2),o=r[0],i=r[1];null!==i&&""!==i&&("lang.code"!==o&&"section"!==o||t.push(Object(s.a)({},o,"^".concat(i))),"searchTerm"===o&&(n.push({author:i}),n.push({title:i})))}t.push({$or:n});var h=e.search({$and:t});h=h.slice(0,40);var d=[];h.forEach((function(e){if(!d.find((function(t){return t.item.section===e.item.section&&t.item.lang.code===e.item.lang.code}))&&e.item.lang.code){var t=e.item.lang.code,n=e.item.subsection?e.item.subsection:e.item.section;"en"===t&&(t=e.item.lang.isSubject?"subjects":"langs");var c=n;if(c.includes("<a")){var a=c.match(/"(.*?)"/)[0];n=c=a?a.replaceAll(/\"/g,""):"FAIL"}c=c.toLowerCase().replaceAll(" ","-").replaceAll(/\(|\)|\&|\/|\./g,"");var r={item:{author:"",lang:e.item.lang,section:e.item.section,title:"List of all ".concat(n," resources in ").concat(e.item.lang.name),url:"https://ebookfoundation.github.io/free-programming-books/books/free-programming-books-".concat(t,".html#").concat(c)}};d.push(r)}})),h=(d=d.slice(0,5)).concat(h),$(h)}}),[B,l]),M?Object(f.jsx)("h1",{children:"Loading..."}):Q?Object(f.jsxs)("h1",{children:["Error: ",Q]}):(B.searchTerm&&0!==J.length&&(R=J&&J.map((function(e){return Object(f.jsx)(j,{data:e.item})}))),a.a.StrictMode,d.a,k.Consumer,B["lang.code"],R||B.searchTerm||(b.c,b.a,b.a),document.getElementById("root"))},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,95)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))},w=n(92);o.a.render(Object(f.jsx)(w.a,{children:Object(f.jsx)(S,{children:Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(L,{})})})}),document.getElementById("root")),T()}},[[86,1,2]]]);
//# sourceMappingURL=main.f7a8c12e.chunk.js.map