(this.webpackJsonpfpb_search_page=this.webpackJsonpfpb_search_page||[]).push([[0],{146:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),r=a(72),s=a.n(r),o=(a(87),a(39)),i=a(3),l=a(6),u=a(9),h=a(29),b=a.n(h),d=a(0),j=a(50);var g=function(e){var t,a=e.changeParameter,c=e.data,r=e.langCode,s=Object(n.useState)([]),o=Object(u.a)(s,2),i=o[0],l=o[1],h=Object(n.useState)(r),b=Object(u.a)(h,2),g=b[0],m=b[1],f=Object(n.useState)(!1),O=Object(u.a)(f,2),p=O[0],x=O[1],v=function(e){a("lang.code",e.target.value),m(e.target.value)};Object(n.useEffect)((function(){var e=j.parse(document.location.search);e.lang?"langs"===e.lang||"subjects"===e.lang?(a("lang.code","en"),m("en")):(a("lang.code",e.lang),m(e.lang)):(a("lang.code",""),m(""))}),[]),Object(n.useEffect)((function(){if(c){var e=[{code:"en",name:"English"}];c.children[0].children.forEach((function(t){"string"===typeof t.language.name&&t.language.name.length>0&&"en"!==t.language.code&&e.push(t.language)})),e.sort((function(e,t){return e.name>t.name})),l(e)}}),[c]),t=i&&i.map((function(e){return function(e){return Object(d.jsx)("div",{children:Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"radio",className:"lang",value:e.code,onChange:v,checked:e.code===g},e.code),e.name]})})}(e)}));var k=Object(d.jsxs)("form",{className:"filters",children:[Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"radio",className:"sect-select",value:"",onChange:v,checked:""===g},"all"),"All Languages"]}),t]});return Object(d.jsxs)("div",{className:"langFilters",children:[Object(d.jsxs)("div",{className:"filterHeader",children:[Object(d.jsx)("h3",{children:"Filter by Language"}),Object(d.jsx)("button",{onClick:function(){return x(!p)},children:p?"-":"+"})]}),p?k:""]})};a(50);var m=function(e){return Object(n.useEffect)((function(){document.getElementById("searchBar").value=e.defaultTerm}),[]),Object(d.jsx)("form",{onSubmit:function(e){e.preventDefault()},name:"searchBar",className:"searchbar",children:Object(d.jsx)("input",{id:"searchBar",autoComplete:"off",type:"text",name:"searchTerm",placeholder:"Search Book or Author",className:"searchterm",onChange:function(t){e.changeParameter("searchTerm",t.target.value)}})})};var f=function(e){var t=e.data;return Object(d.jsx)("li",{className:"result",children:Object(d.jsxs)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:["(",t.lang.code,") ",t.title,t.author?" by ".concat(t.author):""]})})},O=a(30),p=a.n(O),x=a(78),v={dark:"",light:"dark-content"},k=function(e){if(e===v.light)document.body.classList.add("dark-content");else document.body.classList.remove("dark-content")},E=Object(n.createContext)({theme:v.dark,changeTheme:function(){}});function y(e){var t=Object(n.useState)(e.theme),a=Object(u.a)(t,2),c=a[0],r=a[1];return k(c),Object(d.jsx)(E.Provider,{value:{theme:c,changeTheme:function(e){r(e)}},children:e.children})}var S=a(158);var w=a.p+"static/media/sun.4c5a4fb0.png",N=a.p+"static/media/moon.dd634065.png",C=a(79),F=a(157),T=a(58),L=a(57);var P=function(e){e.node;var t=e.children,a=(e.className,e.sect),c=e.props,r=Object(n.useState)(),s=Object(u.a)(r,2),o=s[0],i=s[1],l=Object(n.useState)(),h=Object(u.a)(l,2),b=h[0],j=h[1];return Object(n.useEffect)((function(){var e=c.href.split("/");if(2==e.length){i(e[0]);var t=e[1].split(".")[0];j(t)}else j(e[0].split(".")[0]),i("docs"===a?a:null)}),[c.href]),o?Object(d.jsx)("a",{href:"/?&sect=".concat(o,"&file=").concat(b),children:t}):Object(d.jsx)("a",{href:"/?file=".concat(b),children:t})},M=["node","inline","className","children"];var _=function(e){var t=e.file,a=e.sect,c=Object(n.useState)(null),r=Object(u.a)(c,2),s=r[0],i=r[1],h=Object(n.useState)(!0),j=Object(u.a)(h,2),g=j[0],m=j[1];return Object(n.useEffect)((function(){function e(){return(e=Object(o.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log({sect:a,file:t}),m(!0),n=null,a||t){e.next=10;break}return e.next=7,p.a.get("https://raw.githubusercontent.com/EbookFoundation/free-programming-books/main/README.md");case 7:n=e.sent,e.next=19;break;case 10:if(a||!t){e.next=16;break}return e.next=13,p.a.get("https://raw.githubusercontent.com/EbookFoundation/free-programming-books/main/LICENSE");case 13:n=e.sent,e.next=19;break;case 16:return e.next=18,p.a.get("https://raw.githubusercontent.com/EbookFoundation/free-programming-books/main/".concat(a,"/").concat(t,".md"));case 18:n=e.sent;case 19:i(n.data),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.log("Couldn't get data. Please try again later");case 25:m(!1);case 26:case"end":return e.stop()}}),e,null,[[0,22]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,a]),g?Object(d.jsx)("p",{children:"Loading..."}):a&&"docs"!==a?Object(d.jsx)("section",{children:Object(d.jsx)(F.a,{children:s,remarkRehypeOptions:{allowDangerousHtml:!0},rehypePlugins:[T.a,L.a]})}):Object(d.jsx)("section",{children:Object(d.jsx)(F.a,{children:s,remarkRehypeOptions:{allowDangerousHtml:!0},rehypePlugins:[T.a,L.a],components:{a:function(e){var t=e.node,n=(e.inline,e.className),c=e.children,r=Object(C.a)(e,M);return r.href.startsWith("http")?Object(d.jsx)("a",Object(l.a)(Object(l.a)({className:n},r),{},{children:c})):Object(d.jsx)(P,{node:t,children:c,className:n,sect:a,props:r})}}})})},A=a(50);function B(e){var t=[],a=[];return e.children[0].children.forEach((function(e){e.sections.forEach((function(n){a.includes(n.section)||a.push(n.section),n.entries.forEach((function(a){t.push({author:a.author,title:a.title,url:a.url,lang:e.language,section:n.section})})),n.subsections.forEach((function(a){a.entries.forEach((function(c){t.push({author:c.author,title:c.title,url:c.url,lang:e.language,section:n.section,subsection:a.section})}))}))}))})),{arr:t,sections:a}}var H=function(){var e=Object(n.useState)(void 0),t=Object(u.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),s=Object(u.a)(r,2),h=s[0],j=s[1],O=Object(n.useState)(!0),y=Object(u.a)(O,2),C=y[0],F=y[1],T=A.parse(document.location.search).search||"",L=Object(n.useState)({searchTerm:T,"lang.code":""}),P=Object(u.a)(L,2),M=P[0],H=P[1],D=Object(n.useState)([]),I=Object(u.a)(D,2),R=I[0],G=I[1],J=Object(n.useState)([]),$=Object(u.a)(J,2),V=($[0],$[1],Object(S.a)(["lightMode"])),W=Object(u.a)(V,3),q=W[0],z=W[1],K=(W[2],Object(n.useState)({lang:"",subject:""})),Q=Object(u.a)(K,2),U=Q[0],X=Q[1],Y=Object(n.useState)(""),Z=Object(u.a)(Y,2),ee=Z[0],te=Z[1],ae=null,ne=function(e,t){H(Object(l.a)(Object(l.a)({},M),{},Object(i.a)({},e,t)))};return Object(n.useEffect)((function(){function e(){return(e=Object(o.a)(b.a.mark((function e(){var t,a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,X(A.parse(document.location.search)),U.lang&&("langs"===U.lang||"subjects"===U.lang?ne("lang.code","en"):ne("lang.code",U.lang)),e.next=5,p.a.get("https://raw.githubusercontent.com/EbookFoundation/free-programming-books-search/main/fpb.json");case 5:t=e.sent,c(t.data),a=B(t.data),n=a.arr,a.sections,j(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),te("Couldn't get data. Please try again later");case 14:F(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}k(q.lightMode?v.lightMode:v.darkMode),function(){e.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){if(h){for(var e=new x.a(h,{useExtendedSearch:!0,findAllMatches:!0,shouldSort:!0,includeScore:!0,includeMatches:!0,threshold:.2,keys:["author","title","lang.code","section"]}),t=[],a=[],n=0,c=Object.entries(M);n<c.length;n++){var r=Object(u.a)(c[n],2),s=r[0],o=r[1];null!==o&&""!==o&&("lang.code"!==s&&"section"!==s||t.push(Object(i.a)({},s,"^".concat(o))),"searchTerm"===s&&(a.push({author:o}),a.push({title:o})))}t.push({$or:a});var l=e.search({$and:t});l=l.slice(0,40);var b=[];l.forEach((function(e){if(!b.find((function(t){return t.item.section===e.item.section&&t.item.lang.code===e.item.lang.code}))&&e.item.lang.code){var t=e.item.lang.code,a=e.item.subsection?e.item.subsection:e.item.section;"en"===t&&(t=e.item.lang.isSubject?"subjects":"langs");var n=a;if(n.includes("<a")){var c=n.match(/"(.*?)"/)[0];a=n=c?c.replaceAll(/\"/g,""):"FAIL"}n=n.toLowerCase().replaceAll(" ","-").replaceAll(/\(|\)|\&|\/|\./g,"");var r={item:{author:"",lang:e.item.lang,section:e.item.section,title:"List of all ".concat(a," books in ").concat(e.item.lang.name),url:"/free-programming-books-search?sect=books&lang=".concat(t,"&file=free-programming-books-").concat(t,"#").concat(a),samePage:!0}};b.push(r)}})),l=(b=b.slice(0,5)).concat(l),G(l)}}),[M,h]),ee?Object(d.jsxs)("h1",{children:["Error: ",ee]}):(M.searchTerm&&0!==R.length&&(ae=R&&R.map((function(e){return Object(d.jsx)(f,{data:e.item})}))),Object(d.jsxs)("div",{className:"wrapper",children:[Object(d.jsx)(E.Consumer,{children:function(e){var t=e.changeTheme,a=q.lightMode&&"true"!==q.lightMode.toLowerCase();return t(a?v.light:v.dark),Object(d.jsx)("img",{alt:"Toggle light/dark mode",src:a?N:w,onClick:function(){z("lightMode",a),t(a?v.light:v.dark)},style:{width:"20px",height:"20px",display:"block",marginLeft:"auto"}})}}),Object(d.jsxs)("header",{className:"header",children:[Object(d.jsx)("h1",{children:Object(d.jsx)("a",{href:"/free-programming-books-search/",children:"free-programming-books"})}),Object(d.jsxs)("p",{children:[Object(d.jsx)("img",{className:"emoji",title:":books:",alt:":books:",src:"https://github.githubassets.com/images/icons/emoji/unicode/1f4da.png",height:"20",width:"20"})," ","Freely available programming books"]}),Object(d.jsx)("p",{className:"view",children:Object(d.jsxs)("a",{href:"https://github.com/EbookFoundation/free-programming-books",target:"_blank",rel:"noreferrer",children:["View the Project on GitHub ",Object(d.jsx)("small",{children:"EbookFoundation/free-programming-books"})]})}),Object(d.jsxs)("p",{children:["Does a link not work?",Object(d.jsx)("br",{}),Object(d.jsx)("a",{href:"https://github.com/EbookFoundation/free-programming-books/issues/",target:"_blank",rel:"noreferrer",children:"Report an error on GitHub"})]}),Object(d.jsx)("div",{children:C?Object(d.jsx)("p",{}):Object(d.jsxs)("div",{children:[Object(d.jsx)(m,{changeParameter:ne,defaultTerm:M.searchTerm})," ",Object(d.jsx)(g,{changeParameter:ne,data:a,langCode:M["lang.code"]})," "]})})]}),Object(d.jsx)("section",{className:"search-results",children:C?Object(d.jsx)("p",{children:"Loading"}):ae?Object(d.jsxs)("div",{children:[Object(d.jsx)("br",{}),Object(d.jsx)("h2",{children:"Search Results"}),Object(d.jsx)("ul",{children:ae})]}):M.searchTerm?Object(d.jsxs)("div",{children:[Object(d.jsx)("br",{}),Object(d.jsx)("h2",{children:"No results found."})]}):Object(d.jsx)(_,{file:U.file,sect:U.sect})}),Object(d.jsxs)("footer",{children:[Object(d.jsxs)("p",{children:["This project is maintained by"," ",Object(d.jsx)("a",{href:"https://github.com/EbookFoundation",target:"_blank",rel:"noreferrer",children:"EbookFoundation"})]}),Object(d.jsx)("p",{children:Object(d.jsxs)("small",{children:["Hosted on GitHub Pages \u2014 Theme by"," ",Object(d.jsx)("a",{href:"https://github.com/orderedlist",target:"_blank",rel:"noreferrer",children:"orderedlist"})]})})]})]}))},D=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,159)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))},I=a(156);s.a.render(Object(d.jsx)(I.a,{children:Object(d.jsx)(y,{children:Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(H,{})})})}),document.getElementById("root")),D()},87:function(e,t,a){}},[[146,1,2]]]);
//# sourceMappingURL=main.6e492005.chunk.js.map