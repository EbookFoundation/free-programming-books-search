(this.webpackJsonpfpb_search_page=this.webpackJsonpfpb_search_page||[]).push([[0],{146:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(72),s=n.n(r),o=(n(87),n(39)),i=n(3),l=n(6),h=n(9),u=n(29),b=n.n(u),j=n(0),d=n(50);var g=function(e){var t,n=e.changeParameter,c=e.data,r=e.langCode,s=Object(a.useState)([]),o=Object(h.a)(s,2),i=o[0],l=o[1],u=Object(a.useState)(r),b=Object(h.a)(u,2),g=b[0],f=b[1],O=Object(a.useState)(!1),m=Object(h.a)(O,2),p=m[0],x=m[1],k=function(e){n("lang.code",e.target.value),f(e.target.value)};Object(a.useEffect)((function(){var e=d.parse(document.location.search);e.lang?"langs"===e.lang||"subjects"===e.lang?(n("lang.code","en"),f("en")):(n("lang.code",e.lang),f(e.lang)):(n("lang.code",""),f(""))}),[]),Object(a.useEffect)((function(){if(c){var e=[{code:"en",name:"English"}];c.children[0].children.forEach((function(t){"string"===typeof t.language.name&&t.language.name.length>0&&"en"!==t.language.code&&e.push(t.language)})),e.sort((function(e,t){return e.name>t.name})),l(e)}}),[c]),t=i&&i.map((function(e){return function(e){return Object(j.jsx)("div",{children:Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"radio",className:"lang",value:e.code,onChange:k,checked:e.code===g},e.code),e.name]})})}(e)}));var v=Object(j.jsxs)("form",{className:"filters",children:[Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"radio",className:"sect-select",value:"",onChange:k,checked:""===g},"all"),"All Languages"]}),t]});return Object(j.jsxs)("div",{className:"langFilters",children:[Object(j.jsxs)("div",{className:"filterHeader",children:[Object(j.jsx)("h3",{children:"Filter by Language"}),Object(j.jsx)("button",{onClick:function(){return x(!p)},children:p?"-":"+"})]}),p?v:""]})};n(50);var f=function(e){return Object(a.useEffect)((function(){document.getElementById("searchBar").value=e.defaultTerm}),[]),Object(j.jsx)("form",{onSubmit:function(e){e.preventDefault()},name:"searchBar",className:"searchbar",children:Object(j.jsx)("input",{id:"searchBar",autoComplete:"off",type:"text",name:"searchTerm",placeholder:"Search Book or Author",className:"searchterm",onChange:function(t){e.changeParameter("searchTerm",t.target.value)}})})};var O=function(e){var t=e.data;return Object(j.jsx)("li",{className:"result",children:Object(j.jsxs)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:["(",t.lang.code,") ",t.title,t.author?" by ".concat(t.author):""]})})},m=n(30),p=n.n(m),x=n(78),k={dark:"",light:"dark-content"},v=function(e){if(e===k.light)document.body.classList.add("dark-content");else document.body.classList.remove("dark-content")},E=Object(a.createContext)({theme:k.dark,changeTheme:function(){}});function y(e){var t=Object(a.useState)(e.theme),n=Object(h.a)(t,2),c=n[0],r=n[1];return v(c),Object(j.jsx)(E.Provider,{value:{theme:c,changeTheme:function(e){r(e)}},children:e.children})}var S=n(158);var w=n.p+"static/media/sun.4c5a4fb0.png",N=n.p+"static/media/moon.dd634065.png",T=n(79),C=n(157),F=n(58),P=n(57);var M=function(e){e.node;var t=e.children,n=(e.className,e.sect),c=e.props,r=Object(a.useState)(null),s=Object(h.a)(r,2),o=s[0],i=s[1],l=Object(a.useState)(null),u=Object(h.a)(l,2),b=u[0],d=u[1];return Object(a.useEffect)((function(){var e=c.href.split("/");2==e.length?(".."!==e[0]&&i(e[0]),d(e[1])):(d(e[0]),i("docs"===n?n:null))}),[c.href]),o?Object(j.jsx)("a",{href:"/?&sect=".concat(o,"&file=").concat(b),children:t}):Object(j.jsx)("a",{href:"/?file=".concat(b),children:t})},L=["node","inline","className","children"];var _=function(e){var t=e.file,n=e.sect,c=Object(a.useState)(null),r=Object(h.a)(c,2),s=r[0],i=r[1],u=Object(a.useState)(!0),d=Object(h.a)(u,2),g=d[0],f=d[1];return Object(a.useEffect)((function(){function e(){return(e=Object(o.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,f(!0),a=null,n||t){e.next=9;break}return e.next=6,p.a.get("https://raw.githubusercontent.com/EbookFoundation/free-programming-books/main/README.md");case 6:a=e.sent,e.next=18;break;case 9:if(n||!t){e.next=15;break}return e.next=12,p.a.get("https://raw.githubusercontent.com/EbookFoundation/free-programming-books/main/".concat(t));case 12:a=e.sent,e.next=18;break;case 15:return e.next=17,p.a.get("https://raw.githubusercontent.com/EbookFoundation/free-programming-books/main/".concat(n,"/").concat(t));case 17:a=e.sent;case 18:i(a.data),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.log("Couldn't get data. Please try again later");case 24:f(!1);case 25:case"end":return e.stop()}}),e,null,[[0,21]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,n]),g?Object(j.jsx)("p",{children:"Loading..."}):n&&"docs"!==n?Object(j.jsx)("section",{children:Object(j.jsx)(C.a,{children:s,remarkRehypeOptions:{allowDangerousHtml:!0},rehypePlugins:[F.a,P.a]})}):Object(j.jsx)("section",{children:Object(j.jsx)(C.a,{children:s,remarkRehypeOptions:{allowDangerousHtml:!0},rehypePlugins:[F.a,P.a],components:{a:function(e){var t=e.node,a=(e.inline,e.className),c=e.children,r=Object(T.a)(e,L);return r.href.startsWith("http")||"#"===r.href.charAt(0)?Object(j.jsx)("a",Object(l.a)(Object(l.a)({className:a},r),{},{children:c})):Object(j.jsx)(M,{node:t,children:c,className:a,sect:n,props:r})}}})})},B=n(50);function H(e){for(var t=[],n=[],a=0;a<e.children.length;a++)e.children[a].children.forEach((function(e){e.sections.forEach((function(a){n.includes(a.section)||n.push(a.section),a.entries.forEach((function(n){t.push({author:n.author,title:n.title,url:n.url,lang:e.language,section:a.section})})),a.subsections.forEach((function(n){n.entries.forEach((function(c){t.push({author:c.author,title:c.title,url:c.url,lang:e.language,section:a.section,subsection:n.section})}))}))}))}));return{arr:t,sections:n}}var D=function(){var e=Object(a.useState)(void 0),t=Object(h.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),s=Object(h.a)(r,2),u=s[0],d=s[1],m=Object(a.useState)(!0),y=Object(h.a)(m,2),T=y[0],C=y[1],F=B.parse(document.location.search).search||"",P=Object(a.useState)({searchTerm:F,"lang.code":""}),M=Object(h.a)(P,2),L=M[0],D=M[1],A=Object(a.useState)([]),R=Object(h.a)(A,2),G=R[0],I=R[1],J=Object(a.useState)([]),$=Object(h.a)(J,2),V=($[0],$[1],Object(S.a)(["lightMode"])),W=Object(h.a)(V,3),q=W[0],z=W[1],K=(W[2],Object(a.useState)({lang:"",subject:""})),Q=Object(h.a)(K,2),U=Q[0],X=Q[1],Y=Object(a.useState)(""),Z=Object(h.a)(Y,2),ee=Z[0],te=Z[1],ne=null,ae=function(e,t){D(Object(l.a)(Object(l.a)({},L),{},Object(i.a)({},e,t)))};return Object(a.useEffect)((function(){function e(){return(e=Object(o.a)(b.a.mark((function e(){var t,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,X(B.parse(document.location.search)),U.lang&&("langs"===U.lang||"subjects"===U.lang?ae("lang.code","en"):ae("lang.code",U.lang)),e.next=5,p.a.get("https://raw.githubusercontent.com/EbookFoundation/free-programming-books-search/main/fpb.json");case 5:t=e.sent,c(t.data),n=H(t.data),a=n.arr,n.sections,d(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),te("Couldn't get data. Please try again later");case 14:C(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}v(q.lightMode?k.lightMode:k.darkMode),function(){e.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){if(u){for(var e=new x.a(u,{useExtendedSearch:!0,findAllMatches:!0,shouldSort:!0,includeScore:!0,includeMatches:!0,threshold:.2,keys:["author","title","lang.code","section"]}),t=[],n=[],a=0,c=Object.entries(L);a<c.length;a++){var r=Object(h.a)(c[a],2),s=r[0],o=r[1];null!==o&&""!==o&&("lang.code"!==s&&"section"!==s||t.push(Object(i.a)({},s,"^".concat(o))),"searchTerm"===s&&(n.push({author:o}),n.push({title:o})))}t.push({$or:n});var l=e.search({$and:t});l=l.slice(0,40),I(l)}}),[L,u]),ee?Object(j.jsxs)("h1",{children:["Error: ",ee]}):(L.searchTerm&&0!==G.length&&(ne=G&&G.map((function(e){return Object(j.jsx)(O,{data:e.item})}))),Object(j.jsxs)("div",{className:"wrapper",children:[Object(j.jsx)(E.Consumer,{children:function(e){var t=e.changeTheme,n=q.lightMode&&"true"!==q.lightMode.toLowerCase();return t(n?k.light:k.dark),Object(j.jsx)("img",{alt:"Toggle light/dark mode",src:n?N:w,onClick:function(){z("lightMode",n),t(n?k.light:k.dark)},style:{width:"20px",height:"20px",display:"block",marginLeft:"auto"}})}}),Object(j.jsxs)("header",{className:"header",children:[Object(j.jsx)("h1",{children:Object(j.jsx)("a",{href:"/free-programming-books-search/",children:"free-programming-books"})}),Object(j.jsxs)("p",{children:[Object(j.jsx)("img",{className:"emoji",title:":books:",alt:":books:",src:"https://github.githubassets.com/images/icons/emoji/unicode/1f4da.png",height:"20",width:"20"})," ","Freely available programming books"]}),Object(j.jsx)("p",{className:"view",children:Object(j.jsxs)("a",{href:"https://github.com/EbookFoundation/free-programming-books",target:"_blank",rel:"noreferrer",children:["View the Project on GitHub ",Object(j.jsx)("small",{children:"EbookFoundation/free-programming-books"})]})}),Object(j.jsxs)("p",{children:["Does a link not work?",Object(j.jsx)("br",{}),Object(j.jsx)("a",{href:"https://github.com/EbookFoundation/free-programming-books/issues/",target:"_blank",rel:"noreferrer",children:"Report an error on GitHub"})]}),Object(j.jsx)("div",{children:T?Object(j.jsx)("p",{}):Object(j.jsxs)("div",{children:[Object(j.jsx)(f,{changeParameter:ae,defaultTerm:L.searchTerm})," ",Object(j.jsx)(g,{changeParameter:ae,data:n,langCode:L["lang.code"]})," "]})})]}),Object(j.jsx)("section",{className:"search-results",children:T?Object(j.jsx)("p",{children:"Loading"}):ne?Object(j.jsxs)("div",{children:[Object(j.jsx)("br",{}),Object(j.jsx)("h2",{children:"Search Results"}),Object(j.jsx)("ul",{children:ne})]}):L.searchTerm?Object(j.jsxs)("div",{children:[Object(j.jsx)("br",{}),Object(j.jsx)("h2",{children:"No results found."})]}):Object(j.jsx)(_,{file:U.file,sect:U.sect})}),Object(j.jsxs)("footer",{children:[Object(j.jsxs)("p",{children:["This project is maintained by"," ",Object(j.jsx)("a",{href:"https://github.com/EbookFoundation",target:"_blank",rel:"noreferrer",children:"EbookFoundation"})]}),Object(j.jsx)("p",{children:Object(j.jsxs)("small",{children:["Hosted on GitHub Pages \u2014 Theme by"," ",Object(j.jsx)("a",{href:"https://github.com/orderedlist",target:"_blank",rel:"noreferrer",children:"orderedlist"})]})})]})]}))},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,159)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},R=n(156);s.a.render(Object(j.jsx)(R.a,{children:Object(j.jsx)(y,{children:Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(D,{})})})}),document.getElementById("root")),A()},87:function(e,t,n){}},[[146,1,2]]]);
//# sourceMappingURL=main.0854f3b6.chunk.js.map